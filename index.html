<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gas Tracker</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 1rem;
      max-width: 500px;
      margin: auto;
    }
    input, button {
      display: block;
      width: 100%;
      padding: 0.5rem;
      margin-bottom: 1rem;
      font-size: 1rem;
    }
    .entry {
      border-bottom: 1px solid #ccc;
      padding: 0.5rem 0;
    }
    .summary {
      margin-top: 1rem;
      padding: 1rem;
      background: #f4f4f4;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <h1>Gas Tracker</h1>
  <form id="gas-form">
    <input type="date" id="date" required />
    <input type="number" id="miles" placeholder="Miles Driven" step="0.1" required />
    <input type="number" id="mpg" placeholder="MPG (from car)" step="0.1" required />
    <input type="number" id="gallons" placeholder="Gallons Purchased" step="0.01" required />
    <input type="number" id="price" placeholder="Total Price ($)" step="0.01" required />
    <button type="submit">Add Entry</button>
  </form>

  <div class="summary">
    <h3>Summary</h3>
    <p>Total Spent: $<span id="total-spent">0.00</span></p>
    <p>Average MPG: <span id="average-mpg">0</span></p>
  </div>

  <h3>Entries</h3>
  <div id="entries"></div>

  <script>
    const form = document.getElementById('gas-form');
    const entriesDiv = document.getElementById('entries');
    const totalSpentEl = document.getElementById('total-spent');
    const averageMpgEl = document.getElementById('average-mpg');

    let entries = JSON.parse(localStorage.getItem('gasEntries')) || [];

    const render = () => {
      entriesDiv.innerHTML = '';
      let totalSpent = 0;
      let totalMpg = 0;
      entries.forEach(entry => {
        const pricePerGallon = (entry.price / entry.gallons).toFixed(2);
        totalSpent += parseFloat(entry.price);
        totalMpg += parseFloat(entry.mpg);

        const div = document.createElement('div');
        div.className = 'entry';
        div.innerHTML = `
          <strong>${entry.date}</strong><br>
          ${entry.miles} miles • ${entry.gallons} gal • $${entry.price} • ${entry.mpg} MPG • $${pricePerGallon}/gal
        `;
        entriesDiv.appendChild(div);
      });

      totalSpentEl.textContent = totalSpent.toFixed(2);
      averageMpgEl.textContent = entries.length ? (totalMpg / entries.length).toFixed(1) : '0';
    };

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const entry = {
        date: document.getElementById('date').value,
        miles: document.getElementById('miles').value,
        mpg: document.getElementById('mpg').value,
        gallons: document.getElementById('gallons').value,
        price: document.getElementById('price').value
      };
      entries.unshift(entry);
      localStorage.setItem('gasEntries', JSON.stringify(entries));
      form.reset();
      render();
    });

    render();
  </script>
</body>
</html>

